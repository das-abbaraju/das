<project name="picsWeb2" default="buildWeb" basedir=".">
	<property file="${user.home}/.m2/maven.properties" />
	<property name="maven.build.output" value="build/classes" />
	<property name="maven.build.directory" value="build" />
	<property name="webinf.lib.directory" value="WebContent/WEB-INF/lib" />
	<property name="maven.build.final.name" value="picsWeb2-0.0.1" />
	<property name="maven.test.reports" value="${maven.build.directory}/test-reports" />
	<property name="maven.test.output" value="build/test-classes" />
	<property name="maven.repo.local" value="${user.home}/.m2/repository" />
	<path id="build.classpath">
		<fileset dir="${maven.repo.local}">
			<include name="commons-io/commons-io/1.3.1/commons-io-1.3.1.jar" />
			<include name="xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar" />
			<include name="log4j/log4j/1.2.14/log4j-1.2.14.jar" />
			<include name="javax/activation/activation/1.1/activation-1.1.jar" />
			<include name="tomcat/servlet/4.0.6/servlet-4.0.6.jar" />
			<include name="commons-fileupload/commons-fileupload/1.2/commons-fileupload-1.2.jar" />
			<include name="jexcelapi/jxl/2.4.2/jxl-2.4.2.jar" />
			<include name="javax/mail/mail/1.4/mail-1.4.jar" />
			<include name="mysql/mysql-connector-java/5.0.4/mysql-connector-java-5.0.4.jar" />
			<include name="xerces/xercesImpl/2.0.2/xercesImpl-2.0.2.jar" />
			<include name="tomcat/servlet-api/5.5.15/servlet-api-5.5.15.jar" />
			<include name="commons-dbcp/commons-dbcp/1.2.1/commons-dbcp-1.2.1.jar" />
			<include name="commons-collections/commons-collections/2.1/commons-collections-2.1.jar" />
			<include name="commons-pool/commons-pool/1.2/commons-pool-1.2.jar" />
		</fileset>
	</path>
	<target name="clean" description="Clean the output directory">
		<delete dir="${maven.build.directory}" />
	</target>
	<target name="set_lib" description="Clean and recreate WEB-INF lib directory">
		<delete dir="${webinf.lib.directory}" />
		<mkdir dir="${webinf.lib.directory}" />
	</target>
	<target name="compile" depends="get-deps" description="Compile the code">
		<mkdir dir="${maven.build.output}" />
		<javac destdir="${maven.build.output}" excludes="**/package.html" debug="true" deprecation="true" optimize="false">
			<src>
				<pathelement location="src" />
			</src>
			<classpath refid="build.classpath" />
		</javac>
	</target>
	<!--<target name="jar" depends="compile,test" description="Clean the JAR">
    <jar jarfile="${maven.build.directory}/${maven.build.final.name}.jar" basedir="${maven.build.output}" excludes="**/package.html"/>
  </target>-->
	<target name="compile-tests" depends="junit-present, compile" description="Compile the test code" if="junit.present">
		<mkdir dir="${maven.test.output}" />
	</target>
	<target name="test" depends="junit-present, compile-tests" if="junit.present" description="Run the test cases" />
	<target name="test-junit-present">
		<available classname="junit.framework.Test" property="junit.present" />
	</target>
	<target name="junit-present" depends="test-junit-present" unless="junit.present">
		<echo>================================= WARNING ================================</echo>
		<echo> Junit isn't present in your $ANT_HOME/lib directory. Tests not executed. </echo>
		<echo>==========================================================================</echo>
	</target>
	<target name="test-offline">
		<condition property="maven.mode.offline">
			<equals arg1="${build.sysclasspath}" arg2="only" />
		</condition>
	</target>
	<target name="get-deps" description="Download all dependencies">
		<mkdir dir="${maven.repo.local}" />
		<get src="http://repo1.maven.org/maven2/commons-io/commons-io/1.3.1/commons-io-1.3.1.jar" dest="${maven.repo.local}/commons-io/commons-io/1.3.1/commons-io-1.3.1.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar" dest="${maven.repo.local}/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/log4j/log4j/1.2.14/log4j-1.2.14.jar" dest="${maven.repo.local}/log4j/log4j/1.2.14/log4j-1.2.14.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/javax/activation/activation/1.1/activation-1.1.jar" dest="${maven.repo.local}/javax/activation/activation/1.1/activation-1.1.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/tomcat/servlet/4.0.6/servlet-4.0.6.jar" dest="${maven.repo.local}/tomcat/servlet/4.0.6/servlet-4.0.6.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/commons-fileupload/commons-fileupload/1.2/commons-fileupload-1.2.jar" dest="${maven.repo.local}/commons-fileupload/commons-fileupload/1.2/commons-fileupload-1.2.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/jexcelapi/jxl/2.4.2/jxl-2.4.2.jar" dest="${maven.repo.local}/jexcelapi/jxl/2.4.2/jxl-2.4.2.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/javax/mail/mail/1.4/mail-1.4.jar" dest="${maven.repo.local}/javax/mail/mail/1.4/mail-1.4.jar" usetimestamp="true" ignoreerrors="true" />		
		<get src="http://repo1.maven.org/maven2/mysql/mysql-connector-java/5.0.4/mysql-connector-java-5.0.4.jar" dest="${maven.repo.local}/mysql/mysql-connector-java/5.0.4/mysql-connector-java-5.0.4.jar" usetimestamp="true" ignoreerrors="true" />		
		<get src="http://repo1.maven.org/maven2/xerces/xercesImpl/2.0.2/xercesImpl-2.0.2.jar" dest="${maven.repo.local}/xerces/xercesImpl/2.0.2/xercesImpl-2.0.2.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/tomcat/servlet-api/5.5.15/servlet-api-5.5.15.jar" dest="${maven.repo.local}/tomcat/servlet-api/5.5.15/servlet-api-5.5.15.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/commons-dbcp/commons-dbcp/1.2.1/commons-dbcp-1.2.1.jar" dest="${maven.repo.local}/commons-dbcp/commons-dbcp/1.2.1/commons-dbcp-1.2.1.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/commons-collections/commons-collections/2.1/commons-collections-2.1.jar" dest="${maven.repo.local}/commons-collections/commons-collections/2.1/commons-collections-2.1.jar" usetimestamp="true" ignoreerrors="true" />
		<get src="http://repo1.maven.org/maven2/commons-pool/commons-pool/1.2/commons-pool-1.2.jar" dest="${maven.repo.local}/commons-pool/commons-pool/1.2/commons-pool-1.2.jar" usetimestamp="true" ignoreerrors="true" />
	</target>
	<target name="buildWeb" depends="clean,set_lib,get-deps">
		<copy todir="${webinf.lib.directory}" flatten="true">
			<resources>
				<file file="${maven.repo.local}/commons-io/commons-io/1.3.1/commons-io-1.3.1.jar" />
				<file file="${maven.repo.local}/log4j/log4j/1.2.14/log4j-1.2.14.jar" />
				<file file="${maven.repo.local}/javax/activation/activation/1.1/activation-1.1.jar" />
				<file file="${maven.repo.local}/commons-fileupload/commons-fileupload/1.2/commons-fileupload-1.2.jar" />
				<file file="${maven.repo.local}/jexcelapi/jxl/2.4.2/jxl-2.4.2.jar" />
				<file file="${maven.repo.local}/javax/mail/mail/1.4/mail-1.4.jar" />
				<file file="${maven.repo.local}/commons-dbcp/commons-dbcp/1.2.1/commons-dbcp-1.2.1.jar" />
				<file file="${maven.repo.local}/commons-collections/commons-collections/3.2/commons-collections-3.2.jar" />
				<file file="${maven.repo.local}/commons-pool/commons-pool/1.2/commons-pool-1.2.jar" />	
				<file file="${maven.repo.local}/commons-logging/commons-logging/1.1/commons-logging-1.1.jar" />	
				<file file="${user.home}/usr/local/facelets-1.1.13/jsf-facelets.jar" />
				<file file="${maven.repo.local}/commons-digester/commons-digester/1.8/commons-digester-1.8.jar"/>
				<file file="${maven.repo.local}/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar"/>
			</resources>
		</copy>
	</target>

</project>