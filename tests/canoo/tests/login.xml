<?xml version="1.0"?>
<!DOCTYPE project SYSTEM "../dtd/Project.dtd">

<project name="PICS" default="test">
	<property name="login.username" value="opman"/>
	<target name="test">
		<webtest name="Login: No username or password">
		&config;
			<steps>
				<invoke	
					description="Get Contractors Page for Login" 
					url="Login.action" />
				<clickButton 
					label="Login"/>		
				<verifyText 
					description="Attempt login without a username" 
					text="Your username cannot be empty" />			
			</steps>
		</webtest>
		<webtest name="Login: good username; good password">
		&config;
			<steps>
				<invoke 
					description="Get Contractors Page for Login"
					url="Login.action" />				
				<setInputField 
					description="set user name"
					name="username"
					value="${login.username}" />
				<setInputField 
					description="set password"
					name="password"
					value="${login.password}" />
				<clickButton 
					label="Login"/>
					&body_verify;
				<verifyText 
					description="Verify logged in - Welcome"
					text="Welcome" />
				<verifyText 
					description="Verify logged in - Logout"
					text="Logout" />			 	
			</steps>
		</webtest>		
		<webtest name="Login: good username; bad password">
		&config;
			<steps> 
				<property name="error_expected" value="true"/>
				<invoke
					description="Get Contractors Page for Login"
					url="Login.action" />
				<setInputField description="Set username"
					name="username"
					value="${login.username}" />
				<setInputField description="Set bad password"
					name="password"
					value="BADPASS" />
				<clickButton 
					label="Login"/>
					&body_verify;
				<verifyText 
					description="Invalid Password Attempt"
					text="The password is not correct" />
			</steps>
		</webtest>
		<webtest name="Login: non-existant username">
		&config;
			<steps>
				<invoke
					description="Get Contractors Page for Login"
					url="Login.action" />
				<setInputField description="Set username"
					name="username"
					value="usernamethatdoesnotexist" />
				<setInputField description="Set a password"
					name="password"
					value="BADPASS"/>
				<clickButton 
					label="Login"/>
				<verifyText description="No account exists with that username"
					text="No account exists with that username" />			 	
			 </steps>
		</webtest>
		<!--<webtest name="Login: forgot password; retrieve username, password">
		&config;
			<steps>
			 	<invoke
					description="Get Contractors Page for Login"
					url="Login.action" />
				<clickLink 
						description="Retrieve Forgot Password page"
						label="Click here to have it sent to you"/>
				<setInputField 
					description="set email"
					name="email"
					value="${mail.username}" />
				<clickButton 
					label="Send Password"/>
				<invoke
					description="Send Mail"
					url="MailCron.action" />

				<emailSetConfig 
					server="${mail.server}" 
					delay="1" 
					type="${mail.type}"
					password="${mail.password}" 
					username="${mail.username}"/>
				<emailStoreMessageId 
					description="	"
					subject="PICS Login Info"
					property="mid" 
					messageIndex="0"/>
				<emailMessageContentFilter 
					save="plain" 
					messageId="#{mid}" />
				<emailDeleteMessage 
					messageId="#{mid}" />
				<verifyText 
					description="Make sure email text is there" 
					regex="true"
					text="(?is:Attn.*?Your username is: \w*.*?password is: \w*)"/>			 	
			 </steps>
		</webtest>
	--></target>
</project>
