package com.picsauditing.salecommission.invoice.strategy;

import org.springframework.beans.factory.annotation.Autowired;

import com.picsauditing.PICS.BillingCalculatorSingle;
import com.picsauditing.dao.ContractorAccountDAO;
import com.picsauditing.jpa.entities.Invoice;

/**
 * This class contains all the logic for calculating the revenue generated by each Client Site that
 * should be split by the Sales Representative/Account Manager.
 */
public abstract class AbstractInvoiceCommissionStrategy implements InvoiceCommissionStrategy<Invoice> {

	@Autowired
	protected ContractorAccountDAO contractorAccountDAO;
	@Autowired
	protected BillingCalculatorSingle billingService;

	public void processInvoiceCommission(Invoice invoice) {
		if (hasStrategyAlreadyProcessed(invoice)) {
			return;
		}

		buildInvoiceCommissions(invoice);
	}

	protected abstract boolean hasStrategyAlreadyProcessed(Invoice invoice);

	protected abstract void buildInvoiceCommissions(Invoice invoice);

}