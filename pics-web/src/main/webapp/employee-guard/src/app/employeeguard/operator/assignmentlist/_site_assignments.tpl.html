<section class="employee-guard-section">
    <h1>
        <i class="icon-map-marker icon-large"></i>{{ selected_site_name }} Assignments
    </h1>
    <div class="content">
         <div class="row">
            <div class="col-md-2 col-md-offset-1 text-center tile-container">
                <div class="tile primary">
                    <a href="/employee-guard/operators/project/site-assignment/{{ selected_site }}" target="_self">
                        <i class="icon-user"></i>
                        <p class="title">{{ site_assignments.employees }}</p>
                        <p class="subtitle">Assigned to Site</p>
                    </a>
                </div>
            </div>
            <div class="col-md-2 text-center tile-container">
                <div class="tile success">
                    <i class="icon-ok-sign"></i>
                    <p class="title">{{ site_assignments.completed }}</p>
                    <p class="subtitle">Approved</p>
                </div>
            </div>
            <div class="col-md-2 text-center tile-container">
                <div class="tile success">
                    <i class="icon-ok-circle"></i>
                    <p class="title">{{ site_assignments.pending }}</p>
                    <p class="subtitle">Complete</p>
                </div>
            </div>
            <div class="col-md-2 text-center tile-container">
                <div class="tile warning">
                    <i class="icon-warning-sign"></i>
                    <p class="title">{{ site_assignments.expiring }}</p>
                    <p class="subtitle">Expiring Soon</p>
                </div>
            </div>
            <div class="col-md-2 text-center tile-container">
                <div class="tile danger">
                    <i class="icon-minus-sign-alt"></i>
                    <p class="title">{{ site_assignments.expired }}</p>
                    <p class="subtitle">Expired or Incomplete</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="employee-guard-section">
    <header>
        <div class="row">
            <div class="col-md-8">
                <h1>
                    <i class="icon-sitemap icon-large"></i>Project Assignments
                </h1>
            </div>
            <div class="col-md-4">
                <form name="operator_assignment_search" action="#" class="nabar-form search-query" role="search">
                    <fieldset>
                        <div class="search-wrapper">
                            <input name="searchTerm" type="text" class="form-control" ng-model="search" placeholder="Search Projects" />
                            <i class="icon-search"></i>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </header>

    <div class="content">
        <div class="table-responsive">
            <table class="table table-striped table-condensed table-hover table-sort" ng-init="orderByField = 'name'; reverseSort = false;" >
                <thead>
                        <th class="primary text-center" ng-class="{'sort-active' : orderByField=='employees'}" ng-click="orderByField='employees'; reverseSort = !reverseSort">
                            <i class="icon-user icon-large" data-toggle="tooltip" data-placement="top" title="" data-original-title="Number of Employees"></i>
                        </th>
                        <th class="success text-center" ng-class="{'sort-active' : orderByField=='completed'}" ng-click="orderByField='completed'; reverseSort = !reverseSort">
                            <i class="icon-ok-sign icon-large" data-toggle="tooltip" data-placement="top" title="" data-original-title="Approved"></i>
                        </th>
                        <th class="success text-center" ng-class="{'sort-active' : orderByField=='pending'}" ng-click="orderByField='pending'; reverseSort = !reverseSort">
                            <i class="icon-ok-circle icon-large" data-toggle="tooltip" data-placement="top" title="" data-original-title="Complete"></i>
                        </th>
                        <th ng-class="{'sort-active' : orderByField=='expiring'}" ng-click="orderByField='expiring'; reverseSort = !reverseSort" class="warning text-center" >
                            <i class="icon-warning-sign icon-large" data-toggle="tooltip" data-placement="top" title="" data-original-title="Expiring Soon"></i>
                        </th>
                        <th class="danger text-center" ng-class="{'sort-active' : orderByField=='expired'}" ng-click="orderByField='expired'; reverseSort = !reverseSort">
                            <i class="icon-minus-sign-alt icon-large" data-toggle="tooltip" data-placement="top" title="" data-original-title="Expired or Incomplete"></i>
                        </th>
                        <th ng-class="{'sort-active' : orderByField=='name'}" ng-click="orderByField='name'; reverseSort = !reverseSort">Name
                            <i ng-show="orderByField == 'name'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                        </th>
                        <th ng-class="{'sort-active' : orderByField=='location'}" ng-click="orderByField='location'; reverseSort = !reverseSort">Location
                            <i ng-show="orderByField == 'location'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                        </th>
                        <th ng-class="{'sort-active' : orderByField=='startDate'}" ng-click="orderByField='startDate'; reverseSort = !reverseSort">Start Date
                            <i ng-show="orderByField == 'startDate'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                        </th>
                        <th ng-class="{'sort-active' : orderByField=='endDate'}" ng-click="orderByField='endDate'; reverseSort = !reverseSort">End Date
                            <i ng-show="orderByField == 'endDate'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="project in project_assignments | orderBy:orderByField:reverseSort | filter:search ">
                        <td class="text-center">{{ project.completed + project.pending + project.expiring + project.expired }}</td>
                        <td class="text-center" ng-class="{'success' : project.completed > 0}">{{ project.completed }}</td>
                        <td class="text-center" ng-class="{'success' : project.pending > 0}">{{ project.pending }}</td>
                        <td class="text-center" ng-class="{'warning' : project.expiring > 0}">{{ project.expiring }}</td>
                        <td class="text-center" ng-class="{'danger' : project.expired > 0}">{{ project.expired }}</td>
                        <td>
                            <a href="/employee-guard/operators/project/{{ project.id }}" target="_self">{{ project.name }}</a>
                        </td>
                        <td>{{ project.location }}</td>
                        <td>{{ project.startDate | date:'yyyy-MM-dd' }}</td>
                        <td>{{ project.endDate | date:'yyyy-MM-dd' }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</section>