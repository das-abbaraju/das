<div class="page-subheader">
    <div class="row">
        <div class="col-md-8">
            <ol class="breadcrumb">
                <li>
                    <a href="/employee-guard/operators/dashboard" translate="SKILLS_LIST.BREADCRUMB.EMPLOYEEGUARD"></a>
                </li>
                <li class="active" translate="SKILLS_LIST.BREADCRUMB.SKILLS"></li>
            </ol>
        </div>
        <div class="col-md-4">
            <div class="page-actions">
                <a href="/employee-guard/operators/skill/create" class="btn btn-default" target="_self"><i class="icon-plus-sign"></i> {{'SKILLS_LIST.BUTTON.ADD_SKILL' | translate }}</a>
            </div>
        </div>
    </div>
</div>
<section class="employee-guard-section" ng-if="userType === 'corporate'">
    <h1>
        <div class="row">
            <div class="col-md-9 col-xs-9">
                <i class="icon-building"></i>{{'OPERATOR.SKILLS_LIST.CORPORATE.REQUIRED.SKILLS.TITLE' | translate }}
            </div>
            <div class="col-md-3 col-xs-3 edit">
                <i class="icon-edit icon-large" ng-click="toggleFormDisplay()"></i>
            </div>
        </div>
    </h1>
    <div class="content">
        <p class="no-value" translate="OPERATOR.SKILLS_LIST.CORPORATE.REQUIRED.SKILLS.MESSAGE"></p>
        <div ng-show="!showEditForm">
            <p ng-if="requiredSkillsList.length <= 0" translate="OPERATOR.SKILLS_LIST.CORPORATE.REQUIRED.SKILLS.NO_SKILLS"></p>
            <ul ng-if="requiredSkillsList.length > 0" class="employee-guard-list skills">
                <li ng-repeat="requiredSkill in requiredSkillsList">
                    <a href="/employee-guard/operators/skill/{{ requiredSkill.id }}" target="_self"><span class="label label-pics">{{ requiredSkill.name }}</span></a>
                </li>
            </ul>
        </div>
        <form name="requiredSkillsForm" class="form-horizontal" ng-show="showEditForm">
            <div class="form-group">
                <div class="col-md-4">
                    <select ui-select2="{ minimumResultsForSearch: -1, width: '100%'}" multiple ng-model="selected_skills">
                        <option ng-repeat="skill in skills" value="{{ skill.id }}">{{ skill.name }}</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <div class="form-actions col-md-4">
                    <button name="operator_skill_edit.update" class="btn btn-success" ng-click="updateRequiredSkills(selected_skills)" type="submit" translate="SKILLS_LIST.REQUIRED.SKILLS.BUTTON.SAVE"></button>
                    <button ng-click="toggleFormDisplay()" class="btn btn-default" type="button" translate="SKILLS_LIST.REQUIRED.SKILLS.BUTTON.CANCEL"></button>
                </div>
            </div>
        </form>
    </div>
</section>

<section class="employee-guard-section" ng-if="userType === 'operator'">
    <h1>
        <div class="row">
            <div class="col-md-9 col-xs-9">
                <i class="icon-building"></i>{{'OPERATOR.SKILLS_LIST.SITE.REQUIRED.SKILLS.TITLE' | translate }}
            </div>
            <div class="col-md-3 col-xs-3 edit">
                <i class="icon-edit icon-large" ng-click="toggleFormDisplay()"></i>
            </div>
        </div>
    </h1>
    <div class="content">
        <p class="no-value" translate="OPERATOR.SKILLS_LIST.SITE.REQUIRED.SKILLS.MESSAGE"></p>
        <div>
            <p ng-if="requiredSkills.length <= 0" translate="OPERATOR.SKILLS_LIST.SITE.REQUIRED.SKILLS.NO_SKILLS"></p>
            <ul ng-if="requiredSkills.length > 0" class="employee-guard-list skills">
                <li ng-repeat="requiredSkill in requiredSkills">
                    <a href="/employee-guard/operators/skill/{{ requiredSkill.id }}" target="_self"><span class="label label-pics">{{ requiredSkill.name }}</span></a>
                </li>
            </ul>
        </div>
    </div>
</section>

<section class="table-search-section employee-guard-section">
    <header>
        <div class="row">
            <div class="col-md-8">
                <h1>
                    <i class="icon-certificate icon-large"></i>{{ 'SKILLS_LIST.SKILLS.TITLE' | translate }}
                </h1>
            </div>
            <div class="col-md-4">
                <form name="skill_search" action="#" class="search-query" role="search">
                    <fieldset>
                        <div class="search-wrapper">
                            <input name="searchTerm" type="text" class="form-control" ng-model="search" placeholder="{{ 'SKILLS_LIST.SKILLS.SEARCH' | translate }}" />
                            <i class="icon-search"></i>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </header>
    <div class="table-responsive">
        <table class="table table-striped table-condensed table-hover table-sort" ng-init="orderByField = 'name'; reverseSort = false;" >
            <thead>
                <tr>
                    <th ng-class="{'sort-active' : orderByField=='name'}" ng-click="orderByField='name'; reverseSort = !reverseSort"><span translate="SKILLS_LIST.SKILLS.SKILL"></span>
                        <i ng-show="orderByField == 'name'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                    </th>
                    <th ng-class="{'sort-active' : orderByField=='type'}" ng-click="orderByField='type'; reverseSort = !reverseSort"><span translate="SKILLS_LIST.SKILLS.TYPE"></span>
                        <i ng-show="orderByField == 'type'" class="pull-right" ng-class="{'icon-sort-down' : !reverseSort, 'icon-sort-up' : reverseSort}"></i>
                    </th>
                    <th translate="SKILLS_LIST.SKILLS.JOB_ROLES"></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="skill in skills | orderBy:orderByField:reverseSort | filter:search ">
                    <td>
                        <a href="/employee-guard/operators/skill/{{ skill.id }}" target="_self">{{ skill.name }}</a>
                    </td>
                    <td>{{ skill.type }}</td>
                    <td>
                        <ul class="employee-guard-list">
                            <li ng-repeat="role in skill.roles">
                                <a href="/employee-guard/operators/role/{{ role.id }}" target="_self"><span class="label label-pics">{{ role.name }}</span></a>
                            </li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>