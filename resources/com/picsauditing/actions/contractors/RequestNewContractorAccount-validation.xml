<!DOCTYPE validators PUBLIC "-//OpenSymphony Group//XWork Validator 1.0.2//EN" "http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">

<validators>
	<field name="requestedContractor.name">
		<field-validator type="requiredstring">
			<message>${getText("RequestNewContractor.error.FillContractorName")}</message>
		</field-validator>
		<field-validator type="stringlength">
			<param name="minLength">2</param>
			<param name="trim">true</param>
			<message>${getText("JS.Validation.Minimum2Characters")}</message>
		</field-validator>
	</field>

	<field name="requestedContractor.primaryContact.name">
		<field-validator type="requiredstring">
			<message>${getText("RequestNewContractor.error.FillContactName")}</message>
		</field-validator>
		<field-validator type="stringlength">
			<param name="maxLength">100</param>
			<param name="trim">true</param>
			<message>${getText("JS.Validation.Maximum100Characters")}</message>
		</field-validator>
	</field>

	<field name="requestedContractor.primaryContact.phone">
		<field-validator type="requiredstring">
			<message>${getText("RequestNewContractor.error.FillPhoneNumber")}</message>
		</field-validator>
		<field-validator type="regex" short-circuit="true">
			<!--
				Allow NANP phones with leadings 1s and potential x1234 extensions as
				well as international formatted phone numbers. Modified from
				http://blog.stevenlevithan.com/archives/validate-phone-number and
				shown in the Regular Expressions Cookbook (O'Reilly, 2009)
			-->
			<param name="expression"><![CDATA[^(\+?(?:\(?[0-9]\)?[-. ]{0,2}){9,14}[0-9])((\s){0,4}((?i)x|(?i)ext)(\s){0,4}[\d]{1,5})?$]]></param>
			<message>${getText("JS.Validation.InvalidPhoneFormat")}</message>
		</field-validator>
	</field>

	<field name="requestedContractor.primaryContact.email">
		<field-validator type="requiredstring">
			<message>${getText("RequestNewContractor.error.FillValidEmail")}</message>
		</field-validator>
		<field-validator type="email">
			<message>${getText("JS.Validation.ValidEmail")}</message>
		</field-validator>
		<field-validator type="stringlength">
			<param name="maxLength">100</param>
			<param name="trim">true</param>
			<message>${getText("JS.Validation.Maximum100Characters")}</message>
		</field-validator>
	</field>

	<field name="requestedContractor.country">
		<field-validator type="required">
			<message>${getText("RequestNewContractor.error.SelectCountry")}</message>
		</field-validator>
	</field>

	<field name="requestRelationship.deadline">
		<field-validator type="required">
			<message>${getText("RequestNewContractor.error.SelectDeadline")}</message>
		</field-validator>
	</field>

	<validator type="fieldexpression">
		<param name="fieldname">requestRelationship.reasonForRegistration</param>
		<param name="expression"><![CDATA[requestRelationship.reasonForRegistration.length() > 0]]></param>
		<message>${getText("RequestNewContractor.error.EnterRegistrationReason")}</message>
	</validator>
	
	<validator type="fieldexpression">
		<param name="fieldname">requestRelationship.operatorAccount</param>
		<param name="expression"><![CDATA[requestRelationship.operatorAccount.id > 0]]></param>
		<message>${getText("RequestNewContractor.error.SelectRequestedByAccount")}</message>
	</validator>
	
	<validator type="fieldexpression">
		<param name="fieldname">requestRelationship.requestedBy</param>
		<param name="expression"><![CDATA[requestRelationship.requestedBy.id > 0]]></param>
		<message>${getText("RequestNewContractor.error.SelectRequestedUser")}</message>
	</validator>

	<validator type="fieldexpression">
		<param name="fieldname">requestedContractor.country</param>
		<param name="expression"><![CDATA[requestedContractor.country.isoCode.length() > 0]]></param>
		<message>${getText("RequestNewContractor.error.SelectCountry")}</message>
	</validator>
	
	<validator type="fieldexpression">
		<param name="fieldname">requestedContractor.countrySubdivision</param>
		<param name="expression"><![CDATA[requestedContractor.countrySubdivision != null && requestedContractor.countrySubdivision.isoCode.length() > 0]]></param>
		<message>${getText("RequestNewContractor.error.SelectCountrySubdivision")}</message>
	</validator>
</validators>